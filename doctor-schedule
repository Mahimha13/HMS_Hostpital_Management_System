<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HMS — Doctor Schedule</title>
<style>
:root{--bg:#f7fbff; --card:#fff; --primary:#0b84ff; --muted:#6b7280}
body{margin:0; font-family:Inter,Arial; background:var(--bg)}
header{padding:10px 16px; background:linear-gradient(90deg,#fff,#f1f9ff)}
.wrap{max-width:1000px;margin:18px auto;padding:12px}
.card{background:#fff;padding:14px;border-radius:12px;box-shadow:0 8px 30px rgba(6,12,30,0.06)}
.slot{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;border:1px solid #eef6ff;margin-bottom:8px}
.btn{background:var(--primary);color:white;padding:8px;border-radius:8px;border:none;cursor:pointer}
.small{font-size:13px;color:var(--muted)}
</style>
</head>
<body>
<header><a href="file:///Users/mahimhaarunkavitha/Desktop/doctor-dasboard.html">← Back</a></header>
<main class="wrap">
  <div class="card">
    <h3>Doctor Schedule Manager</h3>
    <div style="margin-top:8px">
      <label>Select Doctor</label>
      <select id="docSelect" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef6ff"></select>
    </div>

    <div style="margin-top:8px">
      <label>Add slot (date & time)</label>
      <input id="slotDt" type="datetime-local" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef6ff" />
      <div style="margin-top:8px; display:flex; justify-content:flex-end"><button class="btn" onclick="addCustomSlot()">Add Slot</button></div>
    </div>

    <div id="slotsArea" style="margin-top:12px"></div>
  </div>
</main>

<script>
function getDoctors(){ return JSON.parse(localStorage.getItem('hms_doctors')||'[]'); }
function saveDoctors(list){ localStorage.setItem('hms_doctors', JSON.stringify(list)); }
function addNotification(t){ const ns=JSON.parse(localStorage.getItem('hms_notifications')||'[]'); ns.unshift({id:'n'+Date.now(),text:t,time:new Date().toISOString()}); localStorage.setItem('hms_notifications',JSON.stringify(ns)); }

function populate(){
  const sel = document.getElementById('docSelect');
  sel.innerHTML='';
  getDoctors().forEach(d=>{ const o=document.createElement('option'); o.value=d.id; o.text=d.name; sel.appendChild(o); });
  sel.onchange = showSlots;
  if(sel.options.length) sel.value = sel.options[0].value;
  showSlots();
}
function showSlots(){
  const id = document.getElementById('docSelect').value;
  const doc = getDoctors().find(d=>d.id===id);
  const area = document.getElementById('slotsArea'); area.innerHTML='';
  if(!doc) return;
  (doc.slots||[]).sort().forEach(s=>{
    const div=document.createElement('div'); div.className='slot';
    div.innerHTML = `<div>${new Date(s).toLocaleString()}</div><div><button class="btn" onclick="removeSlot('${doc.id}','${s}')">Remove</button></div>`;
    area.appendChild(div);
  });
}
function addCustomSlot(){
  const id = document.getElementById('docSelect').value;
  const dt = document.getElementById('slotDt').value;
  if(!id || !dt){ alert('Select doctor and datetime'); return; }
  const doctors = getDoctors(); const doc = doctors.find(d=>d.id===id);
  doc.slots = doc.slots || [];
  doc.slots.push(new Date(dt).toISOString());
  saveDoctors(doctors);
  addNotification(`${doc.name} added slot ${new Date(dt).toLocaleString()}`);
  showSlots();
}
function removeSlot(docId, slotIso){
  if(!confirm('Remove this slot?')) return;
  const doctors = getDoctors();
  const doc = doctors.find(d=>d.id===docId);
  doc.slots = (doc.slots||[]).filter(s=>s!==slotIso);
  saveDoctors(doctors);
  addNotification(`${doc.name} removed a slot`);
  showSlots();
}
populate();
</script>
</body>
</html>
